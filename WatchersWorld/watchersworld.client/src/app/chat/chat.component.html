<div class="container">
  <!-- Chat Section -->
  <div class="row">
    <!-- Contact List -->
    <div class="col-lg-4 mb-3">
      <div class="contact-list">
        <!-- Search Bar -->
        <div class="p-2">
          <div class="search-bar">
            <i class="fa fa-search search-icon"></i>
            <input type="text" placeholder="Procurar..." class="search-input">
          </div>
        </div>
        <!-- Contact Items -->
        <ul class="list-group">
          <li *ngFor="let userProfile of usersProfiles" (click)="selectUser(userProfile)">
            <div *ngIf="userProfile.userName !== loggedUserName" class="user-item">
              <img class="other-users-user-photo" [src]="userProfile.profilePhoto">
              <span class="other-users-user-name">{{ userProfile.userName }}</span>
              <span class="last-message-time">14:00</span>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Messages Section -->
    <div class="col-lg-8">
      <!-- Chat Card -->
      <div class="card chat-card">
        <!-- Chat Header -->
        <div *ngIf="selectedUser; else noUserSelected" class="card-header d-flex justify-content-between align-items-center">
          <img class="other-users-user-photo" [src]="selectedUser.profilePhoto">
          <span class="other-users-user-name">{{ selectedUser.userName }}</span>
          <button class="btn btn-outline-secondary" style="background-color: #4CAEFE; color:white; border:none" type="button">Opções</button>
        </div>

        <!-- Messages Area -->
        <div *ngIf="selectedUser; else noMessages" class="card-body chat-message-area">
          <div class="message incoming">
            <span class="message-content">Olá, tudo bem?</span>
            <span class="message-timestamp">10:35</span>
          </div>
          <div class="message outgoing">
            <span class="message-content">Olá, sim e contigo?</span>
            <span class="message-timestamp">10:36</span>
          </div>
          <div *ngFor="let message of messages" class="message" [class.outgoing]="message.outgoing">
            <span class="message-content">{{ message.content }}</span>
            <span class="message-timestamp">{{ message.timestamp }}</span>
          </div>
          <!-- More messages here -->
        </div>

        <!-- Input for new message -->
        <div *ngIf="selectedUser" class="card-footer">
          <form (submit)="sendMessage()">
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)]="newMessage" name="newMessage" placeholder="Escrever mensagem...">
              <div class="input-group-append">
                <button class="btn btn-primary" type="submit">Enviar</button>
              </div>
            </div>
          </form>
        </div>

        <!-- No User Selected Placeholder -->
        <ng-template #noUserSelected>
          <div class="card-header d-flex justify-content-between align-items-center" style="visibility: hidden;">
            <span>Placeholder</span>
          </div>
        </ng-template>

        <!-- No Messages Placeholder -->
        <ng-template #noMessages>
          <div class="card-body chat-message-area">
            <div class="p-3 no-user-selected">
              <h3 class="placeholder-text" style="color:white">Selecione um utilizador para começar a conversar.</h3>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
