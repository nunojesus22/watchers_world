<div class="white_container mt-5 p-5">
  <div class="row">
    <form [formGroup]="searchForm" (ngSubmit)="submitForm(1)">
      <div class="d-flex">
        <input type="text" class="form-control flex-grow-1" formControlName="movieName" placeholder="Procurar Filmes ou Series Aqui...">
        <button type="submit" class="btn btn-md ml-2">Procurar</button>
      </div>
    </form>

    <div class="col-md-3 mt-5 ">
      <div class="settings_panel no_margin shadow-sm bg-white rounded">
        <h6 class="background_color light_blue">Resultados da Pesquisa</h6>
        <div id="search_menu_scroller" class="">
          <ul class="settings panel with_counts scroller">
            <li [class.selected]="searchForm.value.type === 'movie'" (click)="searchForm.controls['type'].setValue('movie'); submitForm(1)">
              <a id="movie" class="search_tab" title="Filmes" alt="Filmes">Filmes</a>
              <span> </span>
            </li>
            <li [class.selected]="searchForm.value.type === 'serie'" (click)="searchForm.controls['type'].setValue('serie'); submitForm(1)">
              <a id="serie" class="search_tab" title="Series" alt="Series">Series</a>
              <span> </span>
            </li>
            <li>
              <a id="utilizadores" class="search_tab" title="Utilizadores" alt="Utilizadores">Utilizadores</a>
              <span> </span>
            </li>
          </ul>
        </div>
      </div>
      <div>
        <i class="fas fa-info-circle"></i>
        <span> Dica: O utilizador pode pesquisar pelo nome original do filme, mesmo que esse nao seja do mesmo idioma da pagina. Exemplo: '기생충' (Parasite).</span>
      </div>

    </div>
    <div class="col-md-9">
      <div class="row mt-5">
        <div class="col-md-12" *ngFor="let media of searchResult">
          <div class="row mb-4 shadow-sm bg-white rounded">
            <div class="col-md-2">
              <img class="bd-placeholder-img" *ngIf="media.poster_path; else defaultImage" src="https://image.tmdb.org/t/p/original/{{ media.poster_path }}"
                   [routerLink]="[searchForm.value.type === 'serie' ? '/serie' : '/movie', media.id]">
              <ng-template #defaultImage>
                <img class="bd-placeholder-img" src="../assets/img/default_media_pic.jpg" [routerLink]="[searchForm.value.type === 'serie' ? '/serie' : '/movie', media.id]">
              </ng-template>
            </div>
            <div class="col-md-10">
              <div *ngIf="searchForm.value.type === 'serie'; else movieBlock">
                <h5 class="card-title"><a [routerLink]="[searchForm.value.type === 'serie' ? '/serie' : '/movie', media.id]">{{media.name}}</a></h5>
                <h6 class="card-subtitle mb-2 text-muted">{{media.first_air_date}}</h6>
                <h6 class="card-subtitle mb-2 text-muted">{{media.overview | slice:0:250}}...</h6>
              </div>
              <ng-template #movieBlock>
                <h5 class="card-title"><a [routerLink]="[searchForm.value.type === 'serie' ? '/serie' : '/movie', media.id]">{{media.title}}</a></h5>
                <h6 class="card-subtitle mb-2 text-muted">{{media.release_date}}</h6>
                <h6 class="card-subtitle mb-2 text-muted">{{media.overview | slice:0:250}}...</h6>
              </ng-template>
            </div>
          </div>
        </div>
        <div class="mt-3 d-flex justify-content-center">
          <button class="btn btn-md" *ngIf="currentPage > 1" (click)="previousPage()">&lt;</button>
          <button class="btn btn-md" *ngFor="let page of displayPages" [class.active]="page === currentPage" (click)="submitForm(page)">{{page}}</button>
          <button class="btn btn-md" *ngIf="currentPage < totalPagesArray.length" (click)="nextPage()">&gt;</button>
        </div>

      </div>
    </div>
  </div>
</div>
