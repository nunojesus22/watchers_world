<div class="container bg-white ">
  <div class="movie-page-box">
    <div class="contain mt-5">
      <div class="row  position-relative">
        <!-- Backdrop -->
        <div style="position: relative; width: 100%;">
          <img *ngIf="getMovieDetailResult?.backdrop_path" src="https://image.tmdb.org/t/p/original/{{ getMovieDetailResult.backdrop_path }}" class="backdrop-image" alt="Backdrop Image">
          <ng-template #defaultImage>
            <img src="../assets/img/55b4a4b5-217a-4408-8934-c611fc89c423.jpg" class="backdrop-image" alt="Default Backdrop Image">
          </ng-template>
          <img *ngIf="getMovieDetailResult?.poster_path" src="https://image.tmdb.org/t/p/original/{{ getMovieDetailResult.poster_path }}" class="poster-image" alt="Poster Image">
          <ng-template #defaultPoster>
            <img src="../assets/img/default_media_pic.jpg" class="poster-image" alt="Default Poster Image">
          </ng-template>
        </div>

        <!-- Movie Details -->
        <div class="col-lg-9 mt-5 p-4">
          <div class="d-flex justify-content-between align-items-center">
            <h1 class="mt-2 mb-2">{{getMovieDetailResult?.title}}</h1>

            <div class="buttons-container">
              <button class="expand-button" *ngIf="!isToWatchLater" (click)="markAsWatched()">{{ isWatched ? 'Remover dos Assistidos' : 'Marcar como Assistido' }}</button>
              <button class="expand-button" *ngIf="!isWatched" (click)="markToWatchLater()">{{ isToWatchLater ? 'Remover de Assistir Mais Tarde' : 'Assistir Mais Tarde' }}</button>
            </div>
          </div>



          <div class="container">
            <div class="row">
              <h6 class="mt-2 mb-2">Nome Original: <strong>{{getMovieDetailResult?.original_title}}</strong></h6>
              <div class="  category-div">
                <p class="genre-p" *ngFor="let genre of getMovieDetailResult?.genres; let last = last">
                  {{ genre.name }}<span *ngIf="!last">,</span>
                </p>
              </div>
              <div class="col-md-6">
                <div>
                  <p class="manual-text mt-2 mb-1">Duração:</p>
                  <p class="movie-details mt-1 mb-2">{{convertMinutesToHours(getMovieDetailResult?.runtime)}}</p>

                  <p class="manual-text mt-2 mb-1">Classificação Geral dos Utilizadores:</p>
                  <p class="movie-details mt-1 mb-2">{{convertToPercentage(getMovieDetailResult?.vote_average)}}</p>

                  <p class="manual-text mt-2 mb-1">Sinopse:</p>
                  <p class="movie-details-sinopse mt-1 mb-2">{{getMovieDetailResult?.overview}}</p>
                </div>
              </div>

              <div class="col-md-6">
                <p class="manual-text mt-2 mb-1">Orçamento:</p>
                <p class="movie-details mt-1 mb-2">{{ getMovieDetailResult?.budget | currency:'USD' }}</p>

                <p class="manual-text mt-2 mb-1">Estado:</p>
                <p class="movie-details mt-1 mb-2">{{ getMovieDetailResult?.status }}</p>

                <p class="manual-text mt-2 mb-1">Bilhetaria:</p>
                <p class="movie-details mt-1 mb-2">{{ getMovieDetailResult?.revenue | currency:'USD' }}</p>
              </div>
            </div>

          </div>





          <div class="mt-3 mb-3 genre-p" *ngIf="getMovieProviders?.flatrate?.length">
            Onde Ver:
            <p class="ps" *ngFor="let provider of getMovieProviders.flatrate; let last = last">
              <img src="https://image.tmdb.org/t/p/original/{{  provider?.logo_path }}" class="provider-logo">
              {{ provider?.provider_name }}
            </p>
          </div>
          <div *ngIf="!getMovieProviders?.flatrate?.length">
            Onde Ver:
            Ainda não existem provedores de streaming disponíveis.
          </div>

          <!--<a class="btn btn-md" href="https://www.themoviedb.org/video/play?key={{getMovieVideoResult?}}"
          target="_blank">watch trailer</a>-->

          <div class="container">
            <h2 class="text-black">Top Cast</h2>
            <div class="d-flex flex-row flex-nowrap overflow-auto">
              <div class="card text-center flex-shrink-0" *ngFor="let c of getMovieCastResult">
                <div class="actor-image-container">
                  <img class="img-fluid actor-image" *ngIf="c.profile_path; else defaultImage" src="https://image.tmdb.org/t/p/original/{{ c.profile_path}}">
                  <ng-template #defaultImage>
                    <img class="img-fluid actor-image default-image" src="../assets/img/vecteezy_simple-user-default-icon_24983914.png">
                  </ng-template>
                </div>
                <div class="card-body">
                  <h3 class="text-black">{{c?.original_name}}</h3>
                  <p class="text-black">{{c?.character}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Coluna Botôes dos quizes-->
        <div class="col-lg-2 mt-5 p-2 columQuizes">
          <h2> Quizes </h2>
          <h6 class="titlesQuizes"> Quiz 1: sobre o Filme: </h6>
          <button class="expand-button" (click)="openModal()">Iniciar Quiz</button>
          <h6 class="titlesQuizes"> Quem seria neste filme? </h6>
          <button class="expand-button" (click)="openModal()">Iniciar Quiz</button>
        </div>

      </div>
    </div>
  </div>
</div>
